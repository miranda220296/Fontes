MERGE /*+ INDEX(P17010, P170101) */ INTO P17010 P171
USING (SELECT /*+ INDEX(P17010, P170101) */ P172.R_E_C_N_O_ FROM P17010 P172) P173
ON (P173.R_E_C_N_O_ = P171.R_E_C_N_O_ AND P171.P17_FTRATA = '01010004')
WHEN MATCHED THEN
   UPDATE SET P17_BLQFIL = P171.P17_BLOQ WHERE P173.R_E_C_N_O_ = P171.R_E_C_N_O_