












function U_F1302800(CCODIGO)

local ADADOSSOL := {}
CCODIGO := iif(CCODIGO==NIL,"",CCODIGO)

ADADOSSOL := U_F1302810(CCODIGO)

return ADADOSSOL











function U_F1302810(CCODIGO)

local CALIASTMP := "TMP"
local CQUERY := ""
local AAUX := {}
local CCPFSOLIC := ""
local CFILVAGA := ""
local CCODVAGA := ""
local ACANDIDATO := {"",""}


CCODIGO := iif(CCODIGO==NIL,"",CCODIGO)

MAKESQLEXPR("FSW1302800")

CQUERY := "SELECT RH3_FILIAL, RH3_CODIGO, RH3_MAT, RH3_STATUS, RH3_DTSOLI, "
CQUERY += "       RH3_DTATEN, RH3_FILINI, RH3_MATINI, RH3_FILAPR, RH3_MATAPR, "
CQUERY += "       RH3_XTPCTM, RH3_XCODAL, RH3_XFILAP, RH3_XMATAP, RH3_XDTAPV, RH3_VISAO, RH3_NVLAPR "
CQUERY += "FROM "+RETSQLNAME("RH3")+" RH3 "
CQUERY += "WHERE RH3.D_E_L_E_T_ = ' ' "
CQUERY += "      AND RH3_XTPCTM = '"+CCODIGO+"' "

if .not. (EMPTY(MV_PAR01))
    CQUERY += "      AND "+MV_PAR01+" "
endif
if .not. (EMPTY(MV_PAR02))
    CQUERY += "      AND "+MV_PAR02+" "
endif
if .not. (EMPTY(MV_PAR03)) .and. .not. (EMPTY(MV_PAR04))
    CQUERY += " AND RH3_DTSOLI BETWEEN '"+DTOS(MV_PAR03)+"' AND '"+DTOS(MV_PAR04)+"' "
endif
CQUERY += "ORDER BY RH3_FILIAL, RH3_CODIGO "

CQUERY := CHANGEQUERY(CQUERY)
DBUSEAREA( .T. ,"TOPCONN",TCGENQRY(CQUERY),CALIASTMP)



while (CALIASTMP)->(.not. (EOF()))
    APA5INF := U_F1302813(CALIASTMP->RH3_FILIAL,CALIASTMP->RH3_CODIGO)




    ARESPONS := U_F1302811(CALIASTMP->RH3_FILAPR,CALIASTMP->RH3_MATAPR,CALIASTMP->RH3_XCODAL,CALIASTMP->RH3_NVLAPR,CALIASTMP->RH3_FILIAL)

    CCPFSOLIC := POSICIONE("SRA",1,CALIASTMP->RH3_FILINI+CALIASTMP->RH3_MATINI,"RA_CIC")

    ; if CCODIGO=="004"
        ACANDIDATO := U_F1302815(CALIASTMP->RH3_FILIAL,CALIASTMP->RH3_CODIGO,CALIASTMP->RH3_XTPCTM)
    endif






































    AADD(AAUX,{APA5INF[5],APA5INF[4],ARESPONS[1],ARESPONS[2],ARESPONS[3],ARESPONS[4],ARESPONS[5],ARESPONS[6],ARESPONS[7],POSICIONE("RD0",12,XFILIAL("RD0")+CALIASTMP->RH3_MATINI,"RD0_LOGIN"),CALIASTMP->RH3_CODIGO,CALIASTMP->RH3_MAT,iif( val(CALIASTMP->RH3_STATUS)==1,"Em processo de aprova��o",iif( val(CALIASTMP->RH3_STATUS)==2,"Atendida",iif( val(CALIASTMP->RH3_STATUS)==3,"Reprovada","Aguardando Efetiva��o do RH"))),APA5INF[9],CALIASTMP->RH3_DTATEN,CALIASTMP->RH3_FILINI,CALIASTMP->RH3_FILAPR,CALIASTMP->RH3_XDTAPV,APA5INF[1],APA5INF[2],APA5INF[3],POSICIONE("SRA",1,CALIASTMP->RH3_FILIAL+CALIASTMP->RH3_MAT,"RA_NOME"),POSICIONE("SRA",1,CALIASTMP->RH3_FILIAL+CALIASTMP->RH3_MAT,"RA_CIC"),POSICIONE("SRA",1,CALIASTMP->RH3_FILIAL+CALIASTMP->RH3_MAT,"RA_CARGO"),POSICIONE("SRA",1,CALIASTMP->RH3_FILIAL+CALIASTMP->RH3_MAT,"RA_DEPTO"),POSICIONE("SRA",1,CALIASTMP->RH3_FILIAL+CALIASTMP->RH3_MAT,"RA_CC"),CALIASTMP->RH3_MATINI,POSICIONE("SRA",1,CALIASTMP->RH3_FILINI+CALIASTMP->RH3_MATINI,"RA_NOME"),CCPFSOLIC,POSICIONE("PAB",1,XFILIAL("PAB")+CALIASTMP->RH3_XCODAL,"PAB_SOLDES"),POSICIONE("PAB",1,XFILIAL("PAB")+CALIASTMP->RH3_XCODAL,"PAB_GRPDES"),APA5INF[6],ACANDIDATO[1],ACANDIDATO[2],APA5INF[7],APA5INF[8]})

    AAUXH4 := U_F1302812(CALIASTMP->RH3_FILIAL,CALIASTMP->RH3_CODIGO)
    ; if .not. (EMPTY(AAUXH4)) .and. CCODIGO=="004"
        ; if CALIASTMP->RH3_XTPCTM=="004"
            CFILVAGA :=  alltrim(iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_FILVAG"}))=0,"",AAUXH4[VAR][2]))
            CCODVAGA :=  alltrim(iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_CDVAGA"}))=0,"",AAUXH4[VAR][2]))

            (SQS)->(DBSETORDER(1))
            (SQS)->(DBSEEK(CFILVAGA+CCODVAGA))





















            AADD(AAUX[ len(AAUX)],{SQS->QS_VAGA,SQS->QS_XJORN,SQS->QS_FUNCAO,POSICIONE("RCL",2,SQS->QS_FILPOST+SQS->QS_POSTO,"RCL_DEPTO"),SQS->QS_CC,SQS->QS_XTURNO+"-"+SQS->QS_XDESTUR,iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_VLVAGA"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_SLFECH"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_NMCAND"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_CPFCAN"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_DTADMI"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_TIPOFA"}))=0,"",AAUXH4[VAR][2]),SQS->QS_XSOLFIL,SQS->QS_XSOLPTL,iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_CARGO"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_FILCAN"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="PA2_CC"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_MATCOL"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_SALFUN"}))=0,"",AAUXH4[VAR][2])})
        endif
    endif

    ; if .not. (EMPTY(AAUXH4)) .and. CCODIGO=="005"






        AADD(AAUX[ len(AAUX)],{iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="P10_DTSOLI"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="P10_CODRES"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="P10_DESRES"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="P10_MOTIVO"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="P10_DTDEMI"}))=0,"",AAUXH4[VAR][2])})
    endif







































    ; if .not. (EMPTY(AAUXH4)) .and. CCODIGO=="006"























        AADD(AAUX[ len(AAUX)],{iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_D_FUNC"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_SALATU"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_SALARIO"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_H_M_AT"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_H_S_AT"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_H_D_AT"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_HRSMES"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_HRSEMAN"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_HRSDIA"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_CCATU"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_D_CCAT"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_DEPTOA"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_CC"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_D_CC_D"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_DEPTO"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_D_DEPD"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_OBSINC"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_CODFUNC"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_FILIAL"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_FILIAL"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="TMP_TURNAT"}))=0,"",AAUXH4[VAR][2]),iif((VAR := ASCAN(AAUXH4,{|X,Y| alltrim(X[1])=="RA_TNOTRAB"}))=0,"",AAUXH4[VAR][2])})
    endif


    (CALIASTMP)->(DBSKIP()); end

(CALIASTMP)->(DBCLOSEAREA())

return AAUX















function U_F1302811(CFILSRA,CMATRISRA,CCODALC,CNVLALC,CFILSOL)

local CALIRH4 := "RETRH4"
local CPOSTO := ""
local CMATRI := ""
local CNOME := ""
local CQUERY := ""
local AAUX := {}
local CPOSTAPR := ""
local CCIC := ""
local CCARGO := ""
local CDEPTO := ""
local CCC := ""
local CFUNCAO := ""

CFILSRA := iif(CFILSRA==NIL,"",CFILSRA)
CMATRISRA := iif(CMATRISRA==NIL,"",CMATRISRA)

if (PAC)->(DBSEEK(XFILIAL("PAC")+CCODALC+PADL(CVALTOCHAR(CNVLALC),2,"0")))
    ; if (PA9)->(DBSEEK(XFILIAL("PA9")+PAC->PAC_CODPOS+CFILSOL))
        ;while (PA9)->(PA9_FILIAL+PA9_CODIGO+PA9_FILSOL)==XFILIAL("PA9")+PAC->PAC_CODPOS+CFILSOL 
            CPOSTAPR += "RCX.RCX_FILIAL ='"+PA9->PA9_FILAPR+"' AND RCX.RCX_POSTO = '"+PA9->PA9_POSAPR+"' "
            CPOSTAPR += " OR "
            (PA9)->(DBSKIP()); end
    endif
endif


if (PAC)->(DBSEEK(XFILIAL("PAC")+CCODALC+PADL(CVALTOCHAR(CNVLALC),2,"0")))
    ; if .not. (EMPTY(PAC->PAC_CODLG)) .and. PAC->PAC_VINCL=="1" .and. (PAH)->(DBSEEK(XFILIAL("PAH")+PAC->PAC_CODLG))
        ;while (PAH)->(PAH_FILIAL+PAH_CODIGO)==XFILIAL("PAH")+PAC->PAC_CODLG
            CPOSTAPR += "RCX.RCX_FILIAL ='"+PAH->PAH_FILPOS+"' AND RCX.RCX_POSTO = '"+PAH->PAH_POSTO+"' "
            CPOSTAPR += " OR "
            (PAH)->(DBSKIP()); end
    endif
endif


CPOSTO := POSICIONE("SRA",1,CFILSRA+CMATRISRA,"RA_POSTO")
CPOSTAPR += "RCX.RCX_FILIAL ='"+CFILSRA+"' AND RCX.RCX_POSTO = '"+CPOSTO+"' "

if .not. (EMPTY(CPOSTO))
    CQUERY := "SELECT SRA.RA_FILIAL, "
    CQUERY += "       SRA.RA_MAT, "
    CQUERY += "       SRA.RA_NOME, "
    CQUERY += "       SRA.RA_CIC, "
    CQUERY += "       SRA.RA_CARGO, "
    CQUERY += "       SRA.RA_DEPTO, "
    CQUERY += "       SRA.RA_CC, "
    CQUERY += "       SRA.RA_CODFUNC "
    CQUERY += "FROM "+RETSQLNAME("RCX")+" RCX "
    CQUERY += "INNER JOIN "+RETSQLNAME("SRA")+" SRA  "
    CQUERY += "ON SRA.RA_FILIAL = RCX.RCX_FILIAL "
    CQUERY += "AND SRA.RA_MAT = RCX.RCX_MATFUN "
    CQUERY += "AND SRA.D_E_L_E_T_ = ' ' "
    CQUERY += "WHERE ("+CPOSTAPR+")"
    CQUERY += "  AND RCX.RCX_SUBST = '2' "
    CQUERY += "  AND RCX.D_E_L_E_T_ = ' ' "

    CQUERY := CHANGEQUERY(CQUERY)
    DBUSEAREA( .T. ,"TOPCONN",TCGENQRY(CQUERY),CALIRH4)

    dbselectarea(CALIRH4)
    ;while .not. ((CALIRH4)->(EOF())); 
        ; if EMPTY(CMATRI) .and. EMPTY(CNOME)
            CMATRI += ""+(CALIRH4)->(RA_MAT)+""
            CNOME += ""+(CALIRH4)->(RA_NOME)+""
            CCIC += ""+(CALIRH4)->(RA_CIC)+""
            CCARGO += ""+(CALIRH4)->(RA_CARGO)+""
            CDEPTO += ""+(CALIRH4)->(RA_DEPTO)+""
            CCC += ""+(CALIRH4)->(RA_CC)+""
            CFUNCAO += ""+(CALIRH4)->(RA_CODFUNC)+""
        else 
            CMATRI += ","+(CALIRH4)->(RA_MAT)+""
            CNOME += ","+(CALIRH4)->(RA_NOME)+""
            CCIC += ","+(CALIRH4)->(RA_CIC)+""
            CCARGO += ","+(CALIRH4)->(RA_CARGO)+""
            CDEPTO += ","+(CALIRH4)->(RA_DEPTO)+""
            CCC += ","+(CALIRH4)->(RA_CC)+""
            CFUNCAO += ","+(CALIRH4)->(RA_CODFUNC)+""
        endif
        (CALIRH4)->(DBSKIP()); end

    (CALIRH4)->(DBCLOSEAREA())
endif

AADD(AAUX,CMATRI)
AADD(AAUX,CNOME)
AADD(AAUX,CCIC)
AADD(AAUX,CCARGO)
AADD(AAUX,CDEPTO)
AADD(AAUX,CCC)
AADD(AAUX,CFUNCAO)

return AAUX












function U_F1302812(CFILRH3,CCODSOL)

local AAREA := GETAREA()
local CQUERY := ""
local CALIRH4 := "RH4INF"
local AAUX := {}

CQUERY := "SELECT RH4_CAMPO, RH4_VALNOV, R_E_C_N_O_ AS RECNO  "
CQUERY += "FROM	"+RETSQLNAME("RH4")+" "
CQUERY += "WHERE RH4_CODIGO = '"+CCODSOL+"' "
CQUERY += "		AND RH4_FILIAL = '"+CFILRH3+"' "
CQUERY += "     AND D_E_L_E_T_ = ' ' "
CQUERY += "ORDER BY RH4_ITEM "

CQUERY := CHANGEQUERY(CQUERY)
DBUSEAREA( .T. ,"TOPCONN",TCGENQRY(CQUERY),CALIRH4)

dbselectarea(CALIRH4)
while .not. ((CALIRH4)->(EOF())); 

    ; do case ; case CALIRH4->RH4_CAMPO=="P10_MOTIVO"
    (RH4)->(DBGOTO(CALIRH4->RECNO))
    AADD(AAUX,{CALIRH4->RH4_CAMPO,RH4->RH4_XOBS})
    ; case  alltrim(CALIRH4->RH4_CAMPO)=="TMP_OBS"
    (RH4)->(DBGOTO(CALIRH4->RECNO))
    AADD(AAUX,{CALIRH4->RH4_CAMPO,RH4->RH4_XOBS})
    ; case  alltrim(CALIRH4->RH4_CAMPO)=="TMP_OBSINC"
    (RH4)->(DBGOTO(CALIRH4->RECNO))
    AADD(AAUX,{CALIRH4->RH4_CAMPO,RH4->RH4_XOBS})
    otherwise
    AADD(AAUX,{CALIRH4->RH4_CAMPO,CALIRH4->RH4_VALNOV})
    endcase

    (CALIRH4)->(DBSKIP()); end

(CALIRH4)->(DBCLOSEAREA())

RESTAREA(AAREA)

return AAUX












function U_F1302813(CFILISOL,CCODSOL)

local AAREA := GETAREA()
local AAREAPA5 := (PA5)->(GETAREA())
local CQUERY := ""
local CALIPA5 := "PA5INF"
local CXHORA := ""
local CXDATA := ""
local CXUNIDA := ""
local CXAPROV := ""
local CXSEAPV := ""
local CXSTAT := ""
local CVAR1 := ""
local CVAR2 := ""
local CVAR3 := ""
local CVAR4 := ""

CFILISOL := iif(CFILISOL==NIL,"",CFILISOL)
CCODSOL := iif(CCODSOL==NIL,"",CCODSOL)


CQUERY := "SELECT PA5.PA5_XDATA,UPPER(PA5.PA5_XSTAT)AS PA5_XSTAT,PA5.PA5_XUNAPR,PA5.PA5_XSEAPV,PA5.PA5_XAPROV,PA5.PA5_XHORA,PA5.PA5_XDATA,PA5_XCODEV  "
CQUERY += "FROM	"+RETSQLNAME("PA5")+" PA5 "


CQUERY += "WHERE PA5_XNRSOL = '"+CCODSOL+"' "
CQUERY += "		AND PA5_FILIAL = '"+CFILISOL+"' "
CQUERY += "     AND PA5.D_E_L_E_T_ = ' ' "

CQUERY += "     AND (Upper(TRIM(PA5.PA5_XSTAT)) = 'CONCLU�DA'"
CQUERY += "         OR Upper(TRIM(PA5.PA5_XSTAT)) = 'AGUARDANDO EFETIVA��O DO RH'"
CQUERY += "         OR Upper(TRIM(PA5.PA5_XSTAT)) = 'EFETIVA��O ATENDIDA'"
CQUERY += "         OR Upper(TRIM(PA5.PA5_XSTAT)) = 'SOLICITA��O ABERTA'"
CQUERY += "         OR Upper(TRIM(PA5.PA5_XSTAT)) = 'SOLICITACAO ABERTA')"
CQUERY += " ORDER BY PA5.PA5_XNRSOL,PA5.PA5_XDATA "

CQUERY := CHANGEQUERY(CQUERY)
DBUSEAREA( .T. ,"TOPCONN",TCGENQRY(CQUERY),CALIPA5)


while .not. ((CALIPA5)->(EOF())); 





    CXHORA := CALIPA5->PA5_XHORA
    CXDATA := CALIPA5->PA5_XDATA


    ; if EMPTY(CVAR1) .and. ( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("CONCLU�DA"))
        CVAR1 := CALIPA5->PA5_XDATA
    endif

    ; if EMPTY(CVAR2) .and. ( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("AGUARDANDO EFETIVA��O DO RH"))
        CVAR2 := CALIPA5->PA5_XDATA
    endif

    ; if EMPTY(CVAR3) .and. ( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("EFETIVA��O ATENDIDA"))
        CVAR3 := CALIPA5->PA5_XDATA
    endif


    ; if EMPTY(CVAR4) .and. ((( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("SOLICITA��O ABERTA"))) .or. (( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("SOLICITACAO ABERTA"))))
        CVAR4 := CALIPA5->PA5_XDATA
    endif


    ; if .not. (EMPTY(CALIPA5->PA5_XUNAPR)) .and. ( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("EFETIVA��O ATENDIDA"))
        CXUNIDA := CALIPA5->PA5_XUNAPR
    else 
        CXUNIDA := ""
    endif
    ; if .not. (EMPTY(CALIPA5->PA5_XAPROV)) .and. ( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("EFETIVA��O ATENDIDA"))
        CXAPROV := CALIPA5->PA5_XAPROV
    else 
        CXAPROV := ""
    endif
    ; if .not. (EMPTY(CALIPA5->PA5_XSEAPV)) .and. ( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("EFETIVA��O ATENDIDA"))
        CXSEAPV := CALIPA5->PA5_XSEAPV
    else 
        CXSEAPV := ""
    endif
    ; if .not. (EMPTY(CALIPA5->PA5_XSTAT)) .and. ( alltrim(NOACENTO(CALIPA5->PA5_XSTAT))) $ (NOACENTO("EFETIVA��O ATENDIDA"))
        CXSTAT := CALIPA5->PA5_XSTAT
    else 
        CXSTAT := ""
    endif

    (CALIPA5)->(DBSKIP()); end



(CALIPA5)->(DBCLOSEAREA())

RESTAREA(AAREAPA5)
RESTAREA(AAREA)

return {CXHORA,CVAR1,CXUNIDA,CXAPROV,CXSEAPV,CXSTAT,CVAR2,CVAR3,CVAR4}










function U_F1302814()

local CRET := ""

if FUNNAME()=="F1302801"
    CRET := "RH3->RH3_XTPCTM = '005' "
elseif FUNNAME()=="F1302802"
    CRET := "RH3->RH3_XTPCTM = '006' "
elseif FUNNAME()=="F1302803"
    CRET := "RH3->RH3_XTPCTM = '004' "
endif

return CRET













function U_F1302815(CFILSOL,CCODSOL,CTIPSOL)

local ARETURN := {}
local CQUERY := ""
local CALIAS1 := GETNEXTALIAS()
local CCODCANDIT := ""
local CTELEF := ""
local DDTNASC := ""


if CTIPSOL=="004"
    CQUERY := "SELECT RH4_CAMPO, RH4_VALNOV, R_E_C_N_O_ AS RECNO  "
    CQUERY += "FROM	"+RETSQLNAME("RH4")+" "
    CQUERY += "WHERE RH4_CODIGO = '"+CCODSOL+"' "
    CQUERY += "AND RH4_FILIAL = '"+CFILSOL+"' "
    CQUERY += "AND D_E_L_E_T_ = ' ' "
    CQUERY += "ORDER BY RH4_ITEM "

    CQUERY := CHANGEQUERY(CQUERY)
    DBUSEAREA( .T. ,"TOPCONN",TCGENQRY(CQUERY),CALIAS1)

    dbselectarea(CALIAS1)
    ;while .not. ((CALIAS1)->(EOF())); 

        ; if CALIAS1->RH4_CAMPO=="PA2_CDCAND"
            CCODCANDIT :=  alltrim(CALIAS1->RH4_VALNOV)
            exit 
        endif

        (CALIAS1)->(DBSKIP()); end


    CTELEF := POSICIONE("SQG",1,XFILIAL("SQG")+CCODCANDIT,"QG_FONE")
    DDTNASC := POSICIONE("SQG",1,XFILIAL("SQG")+CCODCANDIT,"QG_DTNASC")

    AADD(ARETURN,CTELEF)
    AADD(ARETURN,DTOC(DDTNASC))
else 

    AADD(ARETURN,"")
    AADD(ARETURN,"/  /")
endif

(CALIAS1)->(DBCLOSEAREA())
return ARETURN


































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































