










function U_F0801102()

local CMAT := ""
local CHTML := ""
local OORG

private CDEPARTAME := ""
private NPTOTAL := 0
private NTOTALPAGE := 0

if APWEXINIT(@CHTML,"InSite")

    HTTPGET->PAGE := iif(HTTPGET->PAGE==NIL,"1",HTTPGET->PAGE)
    HTTPGET->FILTERFIELD := iif(HTTPGET->FILTERFIELD==NIL,"",HTTPGET->FILTERFIELD)
    HTTPGET->FILTERVALUE := iif(HTTPGET->FILTERVALUE==NIL,"",HTTPGET->FILTERVALUE)
    HTTPGET->EMPLOYEEFILIAL := iif(HTTPGET->EMPLOYEEFILIAL==NIL,"",HTTPGET->EMPLOYEEFILIAL)
    HTTPGET->REGISTRATION := iif(HTTPGET->REGISTRATION==NIL,"",HTTPGET->REGISTRATION)
    HTTPGET->EMPLOYEEEMP := iif(HTTPGET->EMPLOYEEEMP==NIL,"",HTTPGET->EMPLOYEEEMP)
    HTTPGET->CKEYVISION := iif(HTTPGET->CKEYVISION==NIL,"",HTTPGET->CKEYVISION)
    HTTPGET->NINDICEDEPTO := iif(HTTPGET->NINDICEDEPTO==NIL,"1",HTTPGET->NINDICEDEPTO)
    HTTPGET->NCURRENTPAGE := iif(HTTPGET->NCURRENTPAGE==NIL,0,HTTPGET->NCURRENTPAGE)
    HTTPGET->NTOTALPAGE := iif(HTTPGET->NTOTALPAGE==NIL,"1",HTTPGET->NTOTALPAGE)

    NCPAGE :=  val(HTTPGET->PAGE)

    ; if EMPTY(HTTPGET->FILTERVALUE)
        HTTPGET->FILTERFIELD := ""
    endif

    CMAT := HTTPSESSION->RHMAT
    CNOME := HTTPSESSION->LOGIN
    HTTPSESSION->ASTRUCTURE := {}
    HTTPSESSION->CDATAINI := ""
    CFILSUP := HTTPSESSION->AUSER[2]

    FGETINFROTINA("U_F0801101.APW")
    GETMAT()


    OORG := WSORGSTRUCTURE():NEW()
    WSCHGURL(@OORG,"ORGSTRUCTURE.APW",,,HTTPGET->EMPLOYEEEMP)
    NCURRENTPAGE := iif(.not. (EMPTY(HTTPGET->NCURRENTPAGE)), val(HTTPGET->NCURRENTPAGE),1)

    ; if EMPTY(HTTPGET->EMPLOYEEFILIAL) .and. EMPTY(HTTPGET->REGISTRATION)
        OORG:CPARTICIPANTID := HTTPSESSION->CPARTICIPANTID

        ; if TYPE("HttpSession->RHMat")=="C" .and. .not. (EMPTY(HTTPSESSION->RHMAT))
            OORG:CREGISTRATION := HTTPSESSION->RHMAT
        endif
    else 
        OORG:CEMPLOYEEFIL := HTTPGET->EMPLOYEEFILIAL
        OORG:CREGISTRATION := HTTPGET->REGISTRATION
    endif









    OORG:CPARTICIPANTID := ""
    OORG:CVISION := HTTPSESSION->AINFROTINA:CVISAO
    OORG:CEMPLOYEEFIL := HTTPSESSION->AUSER[2]
    OORG:CREGISTRATION := HTTPSESSION->RHMAT
    OORG:CEMPLOYEESOLFIL := HTTPSESSION->AUSER[2]
    OORG:CREGISTSOLIC := HTTPSESSION->RHMAT

    OORG:CKEYVISION :=  alltrim(HTTPGET->CKEYVISION)
    OORG:CFILTERVALUE :=  upper(HTTPGET->FILTERVALUE)
    OORG:CFILTERFIELD := HTTPGET->FILTERFIELD
    OORG:CREQUESTTYPE := ""
    OORG:NPAGE := NCURRENTPAGE

    ; if OORG:GETSTRUCTURE()
        HTTPSESSION->ASTRUCTURE := ACLONE(OORG:OWSGETSTRUCTURERESULT:OWSLISTOFEMPLOYEE:OWSDATAEMPLOYEE)
        NPTOTAL := OORG:OWSGETSTRUCTURERESULT:NPAGESTOTAL
        NTOTALPAGE :=  val(HTTPGET->NTOTALPAGE)
    else 

        HTTPSESSION->ASTRUCTURE := {}
        NPAGETOTAL := 1
        NPTOTAL := 1
        NTOTALPAGE := 1
    endif

    CHTML := EXECINPAGE("F0801102")
endif


return CHTML



























































































































































